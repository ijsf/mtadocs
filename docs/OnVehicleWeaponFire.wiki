{{Useful Function}}

This code implements an '''event''' that is triggered when a player in a vehicle fires a vehicles weapon. A list of vehicles that have weapons are listed below:

* Hydra - Fighter Jet (ID: 520)
* Hunter - Assault Helicopter (ID: 425)
* Rustler - World War 2 style fighter (ID: 476)
* Predator - Police Boat with side guns (ID: 430)
* Rhino - Heavily armoured tank (ID: 432)
* Firetruck - Firetruck with sprayable hose (ID: 407)
* S.W.A.T. - Police tank with sprayable hose (ID: 601)
* RC Baron - A mini fighter (ID: 464)

==Parameters==
<syntaxhighlight lang="lua">string vehicleFireType, int vehicleModel</syntaxhighlight>

* vehicleFireType: this will be "primary" or "secondary" depending on which player the button pressed.
* vehicleModel: the model number the player is in when they triggered the event.

==Source==
The source of this event is the player who fired the vehicles gun(s).

==Code==
<section name="Clientside Script" class="client" show="true">
<syntaxhighlight lang="lua">
armedVehicles = {[425]=true, [520]=true, [476]=true, [447]=true, [430]=true, [432]=true, [464]=true, [407]=true, [601]=true}
function vehicleWeaponFire(key, keyState, vehicleFireType)
	local vehModel = getElementModel(getPedOccupiedVehicle(localPlayer))
	if (armedVehicles[vehModel]) then
		triggerEvent("onClientVehicleWeaponFire", localPlayer, vehicleFireType, vehModel)
	end
end
bindKey("vehicle_fire", "down", vehicleWeaponFire, "primary")
bindKey("vehicle_secondary_fire", "down", vehicleWeaponFire, "secondary")
</syntaxhighlight>
</section>
<section name="Serverside Script" class="server" show="true">
<syntaxhighlight lang="lua">
armedVehicles = {[425]=true, [520]=true, [476]=true, [447]=true, [430]=true, [432]=true, [464]=true, [407]=true, [601]=true}
function vehicleWeaponFire(thePresser, key, keyState, vehicleFireType)
	local vehModel = getElementModel(getPedOccupiedVehicle(thePresser))
	if (armedVehicles[vehModel]) then
		triggerEvent("onVehicleWeaponFire", thePresser, vehicleFireType, vehModel)
	end
end

function bindOnJoin()
	bindKey(source, "vehicle_fire", "down", vehicleWeaponFire, "primary")
	bindKey(source, "vehicle_secondary_fire", "down", vehicleWeaponFire, "secondary")
end
addEventHandler("onPlayerJoin", root, bindOnJoin)

function bindOnStart()
	for index, thePlayer in pairs(getElementsByType("player")) do
		bindKey(thePlayer, "vehicle_fire", "down", vehicleWeaponFire, "primary")
		bindKey(thePlayer, "vehicle_secondary_fire", "down", vehicleWeaponFire, "secondary")
	end
end
addEventHandler("onResourceStart", getResourceRootElement(), bindOnStart)
</syntaxhighlight>
</section>

==Example Code==
<section name="Clientside Example" class="client" show="true">
<syntaxhighlight lang="lua">
function eventVehicleFire(typeOfFire, theModel)
	outputChatBox(getPlayerName(source).." fired his "..getVehicleNameFromModel(theModel).."'s weapon ("..typeOfFire..")")
end
addEvent("onClientVehicleWeaponFire", false)
addEventHandler("onClientVehicleWeaponFire", getLocalPlayer(), eventVehicleFire)
</syntaxhighlight>
</section>
<section name="Serverside Example" class="server" show="true">
<syntaxhighlight lang="lua">
function eventVehicleFire(typeOfFire, theModel)
	outputChatBox(getPlayerName(source).." fired his "..getVehicleNameFromModel(theModel).."'s weapon ("..typeOfFire..")", root, 0, 255, 0)
end
addEvent("onVehicleWeaponFire", false)
addEventHandler("onVehicleWeaponFire", root, eventVehicleFire)
</section>

'''Author: Tuna'''

==See Also==
{{Useful_Functions}}