{{Resource page}}

The DirectX scoreboard displays connected players, teams, pings and other data for players ingame. It also has a javascript-enabled web interface, so it can be viewed from a browser. It's created as a replacement for the old [[/Resource:OldScoreboard.md|scoreboard]] resource created by [[/User:jbeta.md|jbeta]].

The biggest difference to the old resource is that it is created fully using MTA's DirectX drawing functions.
When you add a column to the scoreboard, it's linked to the element data field of the same name, so if you add the "score" column, element data in the field "score" will be shown for all players and teams.

Download can be found at the [http://community.mtasa.com/index.php?p=resources&s=details&id=419 MTA community page].

==Exported functions/events==
<section name="Server" class="server" show="true">
===Functions===
<syntaxhighlight lang="lua">
bool scoreboardAddColumn ( string name, [ element forElement = getRootElement(), int width = 70, string friendlyName = name, int priority = slot after "name" column ] )
</syntaxhighlight>
*'''name:''' The column name (also the element data name used to get information from).
*'''forElement:''' The player to who the column should be added for.
*'''width:''' Width of the column in pixels.
*'''friendlyName:''' Friendly name (displayed in the scoreboard) of the column.
*'''priority:''' The priority slot of the column (1-500). If slot isn't free, the column in that slot will be pushed forward.
<br>

<syntaxhighlight lang="lua">
bool scoreboardRemoveColumn ( string name, [ element forElement = getRootElement() ] )
</syntaxhighlight>
*'''name:''' The column name.
*'''forElement:''' The player from who the column should be removed.
<br>

<syntaxhighlight lang="lua">
bool scoreboardClearColumns ( [ element forElement = getRootElement() ] )
</syntaxhighlight>
*'''forElement:''' The player whose scoreboard's columns should be cleared.
<br>

<syntaxhighlight lang="lua">
bool scoreboardResetColumns ( [ element forElement = getRootElement() ] )
</syntaxhighlight>
*'''forElement:''' The player whose scoreboard's columns should be reset (only leaves name and ping).
<br>

<syntaxhighlight lang="lua">
bool scoreboardSetForced ( bool forced, [ element forElement = getRootElement() ] )
</syntaxhighlight>
*'''forced:''' Should scoreboard be forced.
*'''forElement:''' The player whose scoreboard should be forced.
<br>

<syntaxhighlight lang="lua">
bool scoreboardSetSortBy ( string name, [ bool descending = true, element forElement = getRootElement() ] )
</syntaxhighlight>
*'''name:''' The column name. Can also be ''nil'' making the sorting be disabled.
*'''descending:''' Use descending sort.
*'''forElement:''' The player whose scoreboard should be sorted.
<br>

<syntaxhighlight lang="lua">
int scoreboardGetColumnPriority ( string name )
</syntaxhighlight>
*'''name:''' The column name.
'''Returns the column priority (1-500).'''
<br>


<syntaxhighlight lang="lua">
bool scoreboardSetColumnPriority ( string name, int priority, [ element forElement = getRootElement() ] )
</syntaxhighlight>
*'''name:''' The column name.
*'''priority:''' The priority slot of the column (1-500). If slot isn't free, the column in that slot will be pushed forward.
*'''forElement:''' The player to who the column should be added for.
<br>

<syntaxhighlight lang="lua">
int scoreboardGetColumnCount ()
</syntaxhighlight>
*''No arguments.''
'''Returns scoreboard column count.'''
<br>


<syntaxhighlight lang="lua">
bool scoreboardForceTeamsVisible( bool enabled )
</syntaxhighlight>
*'''enabled:''' Should the team header be always visible in the scoreboard (client's setting will be ignored)?
<br>

<syntaxhighlight lang="lua">
bool scoreboardForceTeamsHidden( bool enabled )
</syntaxhighlight>
*'''enabled:''' Should the team header be always hidden in the scoreboard (client's setting will be ignored)?
<br>

<syntaxhighlight lang="lua">
bool isPrioritySlotFree( int slot )
</syntaxhighlight>
*'''slot:''' The priority slot that should be checked.
'''Checks if the specified priority slot is free.'''
<br>


<syntaxhighlight lang="lua">
int getNextFreePrioritySlot( [ int startAt = 1 ] )
</syntaxhighlight>
*'''startAt:''' At which point should we start looking for free slots.
'''Finds the next free priority slot.'''
<br>


'''Note:''' These functions used in [[/scoreboard.md|scoreboard]] resource do also work in dxscoreboard.
<syntaxhighlight lang="lua">
bool addScoreboardColumn ( string columnName, element visibleToElement, int columnPosition, float columnSize )
bool removeScoreboardColumn ( string columnName )
bool setPlayerScoreboardForced ( player thePlayer, bool forced )
bool resetScoreboardColumns ()
</syntaxhighlight>
</section>
<section name="Client" class="client" show="true">
===Functions===
<syntaxhighlight lang="lua">
bool scoreboardAddColumn ( string name, [ int width = 70, string friendlyName = name, int priority = slot after "name" column, function textFunction = nil ] )
</syntaxhighlight>
*'''name:''' The column name (also the element data name used to get information from).
*'''width:''' Width of the column in pixels.
*'''friendlyName:''' Friendly name (displayed in the scoreboard) of the column.
*'''priority:''' The priority slot of the column (1-500). If slot isn't free, the column in that slot will be pushed forward.
*'''textFunction:''' The text function used to process before displaying the content in the column. For example, this function would replace the "_"'s in player names with a space, if added to the "name" column.
<syntaxhighlight lang="lua">
function fixName( playerName )
    return playerName:gsub( "_", " " )
end
</syntaxhighlight>
<br>

<syntaxhighlight lang="lua">
bool scoreboardRemoveColumn ( string name )
</syntaxhighlight>
*'''name:''' The column name.
<br>

<syntaxhighlight lang="lua">
bool scoreboardClearColumns ()
</syntaxhighlight>
*''No arguments.''
<br>

<syntaxhighlight lang="lua">
bool scoreboardResetColumns ()
</syntaxhighlight>
*''No arguments.''
<br>

<syntaxhighlight lang="lua">
bool scoreboardSetForced ( bool forced )
</syntaxhighlight>
*'''forced:''' Should scoreboard be forced.
<br>

<syntaxhighlight lang="lua">
bool scoreboardSetColumnTextFunction ( string name, function textFunction )
</syntaxhighlight>
*'''name:''' The column name.
*'''textFunction:''' The text function used to process before displaying the content in the column. For example, this function would replace the "_"'s in player names with a space, if added to the "name" column.
<syntaxhighlight lang="lua">
function fixName( playerName )
    return playerName:gsub( "_", " " )
end
</syntaxhighlight>
<br>

<syntaxhighlight lang="lua">
bool scoreboardSetSortBy ( string name, [ bool descending = true ] )
</syntaxhighlight>
*'''name:''' The column name. Can also be ''nil'' making the sorting be disabled.
*'''descending:''' Use descending sort.
<br>

<syntaxhighlight lang="lua">
int scoreboardGetColumnPriority ( string name )
</syntaxhighlight>
*'''name:''' The column name.
'''Returns the column priority (1-500).'''
<br>


<syntaxhighlight lang="lua">
bool scoreboardSetColumnPriority ( string name, int priority )
</syntaxhighlight>
*'''name:''' The column name.
*'''priority:''' The priority slot of the column (1-500). If slot isn't free, the column in that slot will be pushed forward.
*'''forElement:''' The player to who the column should be added for.
<br>

<syntaxhighlight lang="lua">
int scoreboardGetColumnCount ()
</syntaxhighlight>
*''No arguments.''
'''Returns scoreboard column count.'''
<br>


<syntaxhighlight lang="lua">
bool isPrioritySlotFree( int slot )
</syntaxhighlight>
*'''slot:''' The priority slot that should be checked.
'''Checks if the specified priority slot is free.'''
<br>


<syntaxhighlight lang="lua">
int getNextFreePrioritySlot( [ int startAt = 1 ] )
</syntaxhighlight>
*'''startAt:''' At which point should we start looking for free slots.
'''Finds the next free priority slot.'''
<br>


<syntaxhighlight lang="lua">
int, int scoreboardGetTopCornerPosition ()
</syntaxhighlight>
'''Returns the absolute position of the scoreboards top corner if it's drawn, ''false'' otherwise.'''
<br>


<syntaxhighlight lang="lua">
int, int scoreboardGetSize ()
</syntaxhighlight>
'''Returns the absolute size (width, height) of the scoreboard if it's drawn, ''false'' otherwise.'''
<br>


<syntaxhighlight lang="lua">
table scoreboardGetSelectedRows ()
</syntaxhighlight>
'''Returns a table with all the selected rows (element, which can be either team or player). Can also return an empty table if rows are selected.''
<br>



'''Note:''' These functions used in [[/scoreboard.md|scoreboard]] resource do also work in dxscoreboard.
<syntaxhighlight lang="lua">
bool setScoreboardForced ( bool forced )
</syntaxhighlight>

===Events===
====onClientPlayerScoreboardClick====
<syntaxhighlight lang="lua">
bool selected, int cursorX, int cursorY
</syntaxhighlight>
*'''selected:''' Was the current row selected (''true'') or unselected (''false'').
*'''cursorX:''' Absolute X position of the cursor.
*'''cursorY:''' Absolute Y position of the cursor.
'''Triggered when a player clicks team/player row with the left mouse button.'''<br>
'''Event ''source'' is the element was clicked, can be either [[/player.md|player]] or [[/team.md|team]].'''
</section>

You can call them from another resource using call()
<syntaxhighlight lang="lua">
call ( getResourceFromName ( "dxscoreboard" ), "scoreboardAddColumn", "Wanted level" )

-- Note that this syntax is also valid
exports.dxscoreboard:scoreboardAddColumn( "Wanted level" )
</syntaxhighlight>

You can set the scoreboard data with setElementData:
<syntaxhighlight lang="lua">
-- 3 is inserted in the player's wanted level column, if column
-- called "Wanted level" has been added in the scoreboard
setElementData ( player, "Wanted level", 3 ) 
</syntaxhighlight>

[[/ru:Resource:Scoreboard.md|ru:Resource:Scoreboard]]